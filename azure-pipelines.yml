# Android
# Build your Android project with Gradle.
# Add steps that test, sign, and distribute the APK, save build artifacts, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/android

trigger:
- master

pool:
  vmImage: 'macos-latest'

steps:
      #- task: FlutterInstall@0
      - task: ShellScript@2
        displayName: 'Flutter Install'
        inputs:
          scriptPath: '$(projectDirectory)/flutterinstall.sh'
      - task: Bash@3
        displayName: 'Linter'
        inputs:
          targetType: inline
          script: $(projectDirectory)/flutter/bin/flutter analyze
      - task: Bash@3
        displayName: 'Flutter Build'
        inputs:
          targetType: inline
          script: $(projectDirectory)/flutter/bin/flutter build apk
      - task: Bash@3
        displayName: 'Flutter Test'
        inputs:
          targetType: inline
          script: $(projectDirectory)/flutter/bin/flutter test
      - task: CopyFiles@2
        inputs:
          contents: '**/*.apk'
          targetFolder: '$(build.artifactStagingDirectory)'
      - task: PublishBuildArtifacts@1
        inputs:
          pathtoPublish: '$(Build.ArtifactStagingDirectory)'
          artifactName: Android